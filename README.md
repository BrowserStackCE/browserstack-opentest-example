![Logo](https://www.browserstack.com/images/static/header-logo.jpg)

# BrowserStack OpenTest Framework Example

## Introduction

OpenTest is a free and open source functional test automation tool for web applications, mobile apps and APIs.

This BrowserStack Example repository demonstrates OpenTest framework with Web and Mobile automation testing capabilities. 

## Features
1. Web testing, with Selenium. All browsers supported. Run tests on your local machine or using a cloud provider.

2. Mobile testing for Android and iOS apps with Appium. Run tests on your local machine or using a cloud provider.

3. API testing, built on top of the Apache HttpClient library.

4. Keyword-driven testing. Assemble your tests using higher-level building blocks which hide the complexity of the underlying technology and let you express yourself in a concise and readable manner.

5. Scripting support. Cover complex test scenarios using JavaScript code, embedded organically within your keyword-driven test to keep things clean and readable.

6. Parallel testing. The number of test sessions you can run in parallel is only limited by the resources of the machine you’re running on (but there’s always more machines in the cloud).

7. Distributed testing. Write tests that execute seamlessly across multiple machines, networks and technologies. Write integration tests that span mobile, web, API and anything in between.

8. Data-driven testing. Run a test multiple times, over a set of data records maintained in a separate data file.

9. Extensible. Integrate with any technology by creating your own custom test actions (keywords).

10. Source control-friendly by design. Work with confidence, knowing that Git has your back. Perfect for large or geographically distributed teams.

11. Environments. Build your tests once and run against multiple environments or using different sets of test data.

12. Works well with others. Use the simple HTTP API to take control of starting and monitoring test sessions, collecting test results, etc.

13. Cross-platform, running on macOS, Windows and Linux.

---

## Repository setup

- Clone the repository

- Ensure you have the following dependencies installed on the machine
   - Node.js 8 or greater
   - Java runtime 8 or greater

- Install from npm:
```
   npm install opentest -g
```

Video tutorial: https://getopentest.org/docs/installation.html (recorded on Windows)

---

## Quick start

1. Open a new terminal window, cd to the server working directory and start the OpenTest server:

```
   cd ~/opentest/server
   opentest server
```
The OpenTest `server` (aka the sync server) is a Node.js application who’s main functions are to orchestrate test execution and to provide a web-based UI.

2. Open a new terminal window, cd to the actor’s working directory and start the test actor:

```
   cd ~/opentest/actor1
   opentest actor
```

The `test actor` is a Java application that runs on the system under test and executes test steps as instructed by the sync server.

The `server` and the `actor1` directories are going to be used as the working directories for the OpenTest server and test actor, respectively. The `test-repo` directory is a sample test repository that demonstrates some basic features of OpenTest.

3. Open a web browser and navigate to http://localhost:3200. (You can change the `syncServerUrl` in actor.yml)
4. From the menu, select Session > Create Session From Template. Select the template Quick start tests and click Create session. Wait a few seconds and refresh your browser to view the result of the test session.

## Parallel Testing

There are also times when your test scenario will need to execute individual steps on two or more machines, either sequentially or in parallel. This scenario calls for building a distributed test. OpenTest has very good support for building distributed tests, this being one of the early design goals of the tool.

A distributed test involves at least two test actors. The actors typically run on different machines but you may also run all actors on a single machine. This is convenient because it means the same test can be run unchanged in both a dev environment where everything runs on the same machine, as well as in a staging, performance testing or production environment where individual software components are deployed on separate machines.

For running tests in parallel we have two create 2 actor folders - actor1 and actor2. Under each of this folders we have to configure actor.yaml file for respective platforms.

This is how the configuration files for the two test actors should look like:

```
MACHINE 1, C:\opentest\actor1\actor.yaml
actorType: ACTOR1
syncServerUrl: http://10.0.0.1:3000
```
```
MACHINE 2, C:\opentest\actor2\actor.yaml
actorType: ACTOR2
syncServerUrl: http://10.0.0.1:3000
```

The two most important configuration parameters we need to set in the actor.yaml configuration file for each test actor are:

1. `actorType`, which indicates the role the actor will play in the test.

2. `syncServerUrl`, which indicates the endpoint that the OpenTest server is listening at, so the test actor knows how to communicate with the server.

### Distributed test syntax

Let’s consider a very simple distributed test involving the two test actors described in the previous section:

```
description: |
  Navigate to the GitHub website, find the React repo using the
  search functionality and go to the repo's homepage
actors:
  - actor: ACTOR1
    segments:
      - segment: 1
        actions:
          - description: Navigate to the GitHub homepage
            action: org.getopentest.selenium.NavigateTo
            args:
              url: https://github.com/

          - description: Enter "react" in the search box
            action: org.getopentest.selenium.SendKeys
            args:
              locator: {css: "input[name='q']"}
              text: react
              sendEnter: true

          - description: Click the React link in the search results
            action: org.getopentest.selenium.Click
            args:
              locator: {css: "a[href='/facebook/react']"}

          - description: Verify that the Clone button exists and is visible
            action: org.getopentest.selenium.AssertElementVisible
            args:
              locator: {xpath: "//*[contains(@class,'btn')][contains(text(),'Clone')]"}

  - actor: ACTOR2
    segments:
      - segment: 1
        actions:
          - description: Navigate to the GitHub homepage
            action: org.getopentest.selenium.NavigateTo
            args:
              url: https://github.com/

          - description: Enter "react" in the search box
            action: org.getopentest.selenium.SendKeys
            args:
              locator: {css: "input[name='q']"}
              text: react
              sendEnter: true

          - description: Click the React link in the search results
            action: org.getopentest.selenium.Click
            args:
              locator: {css: "a[href='/facebook/react']"}

          - description: Verify that the Clone button exists and is visible
            action: org.getopentest.selenium.AssertElementVisible
            args:
              locator: {xpath: "//*[contains(@class,'btn')][contains(text(),'Clone')]"}

```
This will enable us to execute tests in parallel across two different browser/os combinations in BrowserStack Automate platform.

## Additional Resources

- OpenTest [Selenium Keywords](https://getopentest.org/reference/selenium-keywords.html)
- OpenTest [Appium Keywords](https://getopentest.org/reference/appium-keywords.html)
- View your Selenium test results on the [BrowserStack Automate Dashboard](https://www.browserstack.com/automate)
- View your Appium test results on the [BrowserStack App Automate Dashboard](https://www.browserstack.com/app-automate)
- Customizing your Selenium tests capabilities on BrowserStack using our [test capability generator](https://www.browserstack.com/automate/capabilities)
- Customizing your Appium tests capabilities on BrowserStack using our [test capability generator](https://www.browserstack.com/app-automate/capabilities)
- [List of Browsers & mobile devices](https://www.browserstack.com/list-of-browsers-and-platforms?product=automate) for automation testing on BrowserStack
- For testing public web applications behind IP restriction, [Inbound IP Whitelisting](https://www.browserstack.com/local-testing/inbound-ip-whitelisting) can be enabled with the [BrowserStack Enterprise](https://www.browserstack.com/enterprise) offering
- [Distrubuted/Parallel Testing](https://getopentest.org/docs/distributed-testing.html)
